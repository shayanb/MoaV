# MoaV - Multi-protocol Circumvention Stack
# Copy to .env and fill in your values

# =============================================================================
# REQUIRED CONFIGURATION
# =============================================================================

# Your domain (must have DNS configured - see docs/DNS.md)
DOMAIN=example.com

# Email for Let's Encrypt certificates
ACME_EMAIL=admin@example.com

# Admin password for stats dashboard
ADMIN_PASSWORD=change_me_to_something_secure

# Server's public IP (auto-detected if left empty, but set manually for reliability)
SERVER_IP=

# Server's public IPv6 (auto-detected if available, leave empty to disable IPv6)
# Set to "disabled" to explicitly disable IPv6 even if available
SERVER_IPV6=

# =============================================================================
# REALITY PROTOCOL CONFIGURATION (Primary)
# =============================================================================

# Reality target site - a popular site to impersonate (must support TLS 1.3 + H2)
# Good choices: www.microsoft.com, www.apple.com, www.samsung.com, dl.google.com
REALITY_TARGET=www.microsoft.com:443

# Reality short ID (8 hex chars) - auto-generated on first run if empty
REALITY_SHORT_ID=

# Reality private key - auto-generated on first run if empty
REALITY_PRIVATE_KEY=

# =============================================================================
# SERVICE TOGGLES
# =============================================================================

# Default profiles to start with 'moav start' (space-separated)
# Options: proxy wireguard dnstt admin conduit snowflake
# Use 'all' to start everything, or leave empty to be prompted
DEFAULT_PROFILES=proxy

ENABLE_REALITY=true
ENABLE_TROJAN=true
ENABLE_HYSTERIA2=true
ENABLE_WIREGUARD=true
ENABLE_DNSTT=true
# Psiphon Conduit - donates bandwidth to help others bypass censorship
ENABLE_CONDUIT=true
# Bandwidth limit in Mbps (default 200)
CONDUIT_BANDWIDTH=200
# Max concurrent clients (default 100)
CONDUIT_MAX_CLIENTS=100
# Enable stats collection with GeoIP (default false - uses extra CPU)
CONDUIT_STATS_ENABLED=false

# Tor Snowflake - donates bandwidth to help Tor users bypass censorship
ENABLE_SNOWFLAKE=true
# Bandwidth limit in Mbps (default 50)
SNOWFLAKE_BANDWIDTH=50
# Max concurrent clients (default 20)
SNOWFLAKE_CAPACITY=20

ENABLE_ADMIN_UI=true

# =============================================================================
# OPTIONAL CONFIGURATION
# =============================================================================

# Timezone
TZ=UTC

# Number of initial users to create (creates 'demouser' if 1)
INITIAL_USERS=1

# Log level: debug, info, warn, error
LOG_LEVEL=info

# Admin UI IP whitelist (comma-separated, empty = password only)
# Example: ADMIN_IP_WHITELIST=192.168.1.0/24,10.0.0.5
ADMIN_IP_WHITELIST=

# =============================================================================
# DNSTT CONFIGURATION (for DNS tunneling)
# =============================================================================

# Subdomain for DNS tunnel (NS record must point to this server)
# Full domain will be: t.${DOMAIN}
DNSTT_SUBDOMAIN=t

# =============================================================================
# PORTS (change if conflicts with host)
# =============================================================================

PORT_HTTPS=443
PORT_TROJAN=8443
PORT_HYSTERIA=443
PORT_DNS=53
PORT_ADMIN=9443

# =============================================================================
# CLIENT CONFIGURATION (for moav client command)
# =============================================================================

# Local proxy ports when running client mode
# Note: Use alternative ports (10800/18080) when running on the server
# to avoid conflicts with wstunnel (8080) and other services
CLIENT_SOCKS_PORT=10800
CLIENT_HTTP_PORT=18080

# =============================================================================
# COMPONENT VERSIONS (update to use newer releases)
# =============================================================================

# sing-box - https://github.com/SagerNet/sing-box/releases
SINGBOX_VERSION=1.12.17

# wstunnel - https://github.com/erebe/wstunnel/releases
WSTUNNEL_VERSION=10.5.1

# Psiphon Conduit - https://github.com/Psiphon-Inc/conduit/releases
CONDUIT_VERSION=1.2.0

# =============================================================================
# INTERNAL (do not change unless you know what you're doing)
# =============================================================================

COMPOSE_PROJECT_NAME=moav
